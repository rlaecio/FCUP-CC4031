Vagrant.configure("2") do |config|
  # --- Rede base ---
  BASE_IP = "172.10.10."

  # --- Configuração padrão ---
  config.vm.box_check_update = false

  # --- Fedora Server ARM64 ---
  config.vm.define "fedora_server" do |srv|
    srv.vm.box = "marcinbojko/fedora-41-arm64"
    srv.vm.hostname = "fedora-server"
    srv.vm.network "private_network", ip: "#{BASE_IP}10"
    srv.vm.provider "virtualbox" do |vb|
      vb.name = "fedora_server"
      vb.memory = 2048
      vb.cpus = 2
    end
    srv.vm.provision "ansible" do |ansible|
      ansible.playbook = "playbook.yml"
      ansible.inventory_path = "hosts.ini"
      ansible.limit = "fedora_server"
    end
  end

  # --- Fedora Desktop ARM64 ---
  config.vm.define "fedora_desktop" do |desk|
    desk.vm.box = "marcinbojko/fedora-41-arm64"
    desk.vm.hostname = "fedora-desktop"
    desk.vm.network "private_network", ip: "#{BASE_IP}11"
    desk.vm.provider "virtualbox" do |vb|
      vb.name = "fedora_desktop"
      vb.memory = 4096
      vb.cpus = 2
    end
    desk.vm.provision "ansible" do |ansible|
      ansible.playbook = "playbook.yml"
      ansible.inventory_path = "hosts.ini"
      ansible.limit = "fedora_desktop"
    end
  end

  # --- Windows 10 ARM64 ---
  config.vm.define "windows10" do |win|
    win.vm.box = "gusztavvargadr/windows-10-arm64"
    win.vm.hostname = "windows10"
    win.vm.network "private_network", ip: "#{BASE_IP}12"
    win.vm.provider "virtualbox" do |vb|
      vb.name = "windows10"
      vb.memory = 4096
      vb.cpus = 2
    end
    # Windows não será provisionado com Ansible
  end

  # --- Kali Linux ARM64 (tua box personalizada) ---
  #config.vm.define "kali" do |kali|
  #  kali.vm.box = "kali-arm64"  # substitui pelo nome da tua box
  #  kali.vm.hostname = "kali"
  #  kali.vm.network "private_network", ip: "#{BASE_IP}13"
  #  kali.vm.provider "virtualbox" do |vb|
  #    vb.name = "kali"
  #    vb.memory = 2048
  #    vb.cpus = 2
  #  end
  #  kali.vm.provision "ansible" do |ansible|
  #    ansible.playbook = "playbook.yml"
  #    ansible.inventory_path = "hosts.ini"
  #    ansible.limit = "kali"
  #  end
  #end
end

